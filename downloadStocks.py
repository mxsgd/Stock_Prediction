import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
import matplotlib.dates as mdates
import yfinance as yf
import datetime as dt
import mplfinance as mpf
import time

stocks = ['AAXN',
 'ACIA',
 'ADRO',
 'ADSW',
 'AEGN',
 'AFH',
 'AHC',
 'AIMT',
 'AKCA',
 'AKER',
 'ALSK',
 'AMAG',
 'AMRB',
 'AMTD',
 'ANH',
 'ARA',
 'ASFI',
 'ASNA',
 'AWSM',
 'AXE',
 'BASI',
 'BDGE',
 'BEAT',
 'BMCH',
 'BREW',
 'BSTC',
 'CATM',
 'CATS',
 'CBMG',
 'CETV',
 'CGIX',
 'CHAP',
 'CKH',
 'CLCT',
 'CLGX',
 'CLNC',
 'CLNY',
 'CLUB',
 'CMD',
 'CPST',
 'CTB',
 'CTL',
 'CUB',
 'CVIA',
 'CVTI',
 'CXO',
 'DLPH',
 'DNKN',
 'DNR',
 'DRAD',
 'EE',
 'EGOV',
 'EIDX',
 'EIGI',
 'ELGX',
 'ENT',
 'ERI',
 'ETFC',
 'ETM',
 'EV',
 'FBM',
 'FBSS',
 'FDEF',
 'FFG',
 'FIT',
 'FLIR',
 'FNJN',
 'FPRX',
 'FRAN',
 'FSB',
 'FSCT',
 'GCAP',
 'GEC',
 'GEN',
 'GFN',
 'GLIBA',
 'GLUU',
 'GMO',
 'GNC',
 'GNMK',
 'GRIF',
 'GSB',
 'GV',
 'HCFT',
 'HDS',
 'HHS',
 'HMSY',
 'HPR',
 'HWCC',
 'IBKC',
 'IMMU',
 'INTL',
 'INWK',
 'IOTS',
 'IPHI',
 'IRET',
 'JASN',
 'JCAP',
 'LEAF',
 'LM',
 'LOGM',
 'MEET',
 'MGEN',
 'MIK',
 'MINI',
 'MJCO',
 'MNK',
 'MNTA',
 'MSBF',
 'MTSC',
 'MYL',
 'MYOK',
 'MYOS',
 'NBL',
 'NEOS',
 'NGHC',
 'NK',
 'NTN',
 'NVUS',
 'ONDK',
 'OTEL',
 'PDLI',
 'PE',
 'PEIX',
 'PFNX',
 'PGNX',
 'PICO',
 'PIH',
 'PLT',
 'POL',
 'PRCP',
 'PRGX',
 'PRNB',
 'PRSC',
 'PRSP',
 'PS',
 'PTI',
 'PTLA',
 'PTVCA',
 'PTVCB',
 'PUB',
 'QEP',
 'RESI',
 'RLH',
 'RNET',
 'RP',
 'RST',
 'RTIX',
 'RTRX',
 'RTW',
 'RUBI',
 'RVLT',
 'SBBX',
 'SBPH',
 'SERV',
 'SHLO',
 'SITO',
 'SMRT',
 'SNSS',
 'SONA',
 'SPN',
 'STAY',
 'STND',
 'SVMK',
 'SYNC',
 'TAT',
 'TCF',
 'TCO',
 'TECD',
 'TERP',
 'TIF',
 'TLF',
 'TLRD',
 'TNAV',
 'TORC',
 'TPRE',
 'TRUE ',
 'TRWH',
 'TRXC',
 'TTPH',
 'TWMC',
 'UROV',
 'USAT',
 'VAR',
 'VRTU',
 'VSLR',
 'VVUS',
 'WDR',
 'WIFI',
 'WMGI',
 'WPX',
 'WRTC',
 'WYND',
 'XAN',
 'YRCW',
 'ZAGG',
 'ZN',
 'UROV',
 'USAT',
 'VAR',
 'VRML',
 'CBS',
 'VICL',
 'VRTU',
 'VSI',
 'VSLR',
 'VVUS',
 'VISI',
 'WBC',
 'WDR',
 'WCG',
 'WEBK',
 'WAIR',
 'WLH',
 'WPX',
 'WRTC',
 'WMGI',
 'WYND',
 'YRCW',
 'YUMA',
 'ZFGN',
 'ZAGG',
 'ZAYO',
 'ZN']
start_date = "2022-01-01"
end_date = "2022-12-31"

# gmo = yf.Ticker("MSFT")
#
# hist = gmo.history(start=start_date, end=end_date)
# print(gmo.history_metadata)
#
# print(gmo.actions)
# print(gmo.dividends)
# print(gmo.splits)
# print(gmo.capital_gains)
all_stock_data = pd.DataFrame()


for stock in stocks:
    stock_data = yf.download(stock, start=start_date, end=end_date, interval='1d')
    if not stock_data.empty:
     # stock_data['Ticker_ID'] = stock
     all_stock_data = pd.concat([all_stock_data, stock_data], ignore_index=True)

all_stock_data.to_csv("combined_stock_data.csv", index=False)